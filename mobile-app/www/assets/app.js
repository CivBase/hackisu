angular.module('hackisu', ['ngRoute', 'firebase'])
.value('fbURL', 'https://hackisu.firebaseio.com/')

.factory('Firebase', function($firebase, fbURL) {
    return $firebase(new Firebase(fbURL));
})

.config(function($routeProvider) {
    $routeProvider
    .when('/', {
        controller: 'MainCtrl',
        templateUrl: '/main.html'
    })
    .when('/favs', {
        controller: 'FavoritesCtrl',
        templateUrl: '/favorites.html'
    })
    .when('/favs/:favID', {
        controller: 'FavoriteCtrl',
        templateUrl: '/favorites.html'
    })
    .otherwise({
        redirectTo: '/'
    })
})

.controller('MainCtrl', function($scope, Firebase) { 
    $scope.pnotify = function() {
        alert($scope.currentText);
        var opt = {
            type: "basic",
            title: "Primary Title",
            message: "Primary message to display",
            iconUrl: "url_to_small_icon"
          }
        chrome.notifications.create(1, opt, function() { alert('callback'); });
    };
})

.controller('FavoritesCtrl', function($scope, Firebase) {
    
    // Get this with firebase...
    $scope.user_favorites = [
        {
            "name": "Lorry's Coffee",
            "description": "Lorry's coffee is a locally owned and operated coffee shop in the heart of Ames, Iowa. Located just across from Iowa State University"
        },
        {
            "name": "Pixels Video Games",
            "description": "We are an independent video game store located in Ames, IA that specializes in anything and everything video game related. From Atari 2600 to PS4 and Xbox One, we buy, sell, and trade it all."
        },
        {
            "name": "Jeff's Pizza Shop",
            "description": "My biggest motivator in the pizza business is the excitement generated by our customers. For me there is no better feeling in the world than seeing a satisfied smile on someone's face."
        }
    ];
});